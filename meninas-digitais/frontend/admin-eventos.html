<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Gerenciar Eventos - Admin</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="root-bg">
    <header class="navbar">
      <div class="container nav-inner">
        <a href="index.html" class="brand">
          <div class="brand-mark" aria-hidden="true">
            <img src="imagens/logo1.png" alt="Logo" width="100" height="130" />
          </div>
          <div class="brand-text">Meninas Digitais</div>
        </a>
        <nav class="nav-actions">
          <button class="btn btn-outline btn-logout">Sair</button>
        </nav>
      </div>
    </header>

    <div class="admin-layout">
      <aside class="admin-sidebar">
        <h3>Admin Dashboard</h3>
        <a href="admin-dashboard.html">
          <!-- SVG Dashboard -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <rect width="7" height="9" x="3" y="3" rx="1" />
            <rect width="7" height="5" x="14" y="3" rx="1" />
            <rect width="7" height="9" x="14" y="12" rx="1" />
            <rect width="7" height="5" x="3" y="16" rx="1" />
          </svg>
          Dashboard
        </a>
        <a href="admin-eventos.html" class="active">
          <!-- SVG Eventos -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
            <line x1="16" x2="16" y1="2" y2="6" />
            <line x1="8" x2="8" y1="2" y2="6" />
            <line x1="3" x2="21" y1="10" y2="10" />
            <path d="m9 16 2 2 4-4" />
          </svg>
          Eventos
        </a>
        <a href="#" class="btn-logout" style="margin-top: auto">
          <!-- SVG Sair -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
            <polyline points="16 17 21 12 16 7" />
            <line x1="21" x2="9" y1="12" y2="12" />
          </svg>
          Sair
        </a>
      </aside>

      <main class="admin-main-content">
        <div class="page-header">
          <h1>Gerenciamento de Eventos</h1>
          <button id="addEventBtn" class="btn btn-primary">Novo Evento</button>
        </div>

        <div class="card-table">
          <table class="admin-table">
            <thead>
              <tr>
                <th style="width: 25%">TÃ­tulo</th>
                <th style="width: 15%">Data / Hora</th>
                <th style="width: 20%">Local</th>
                <th style="width: 10%; text-align: center">Inscritos</th>
                <th style="width: 10%">Status</th>
                <th style="width: 20%">AÃ§Ãµes</th>
              </tr>
            </thead>
            <tbody id="eventsTableBody">
              <!-- JS vai preencher -->
            </tbody>
          </table>
        </div>
      </main>
    </div>

    <!-- Modal -->
    <div id="eventModal" class="modal">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <h2 id="modalTitle">Criar Novo Evento</h2>
        <form id="eventForm" class="modal-form">
          <input type="hidden" id="eventId" />
          <div class="form-group">
            <label for="titulo">TÃ­tulo</label>
            <input type="text" id="titulo" required />
          </div>
          <div class="form-group">
            <label for="descricao">DescriÃ§Ã£o</label>
            <textarea id="descricao" rows="4" required></textarea>
          </div>
          <div class="form-grid">
            <div class="form-group">
              <label for="data">Data</label>
              <input type="date" id="data" required />
            </div>
            <div class="form-group">
              <label for="horario">HorÃ¡rio</label>
              <input type="time" id="horario" required />
            </div>
          </div>
          <div class="form-grid">
            <div class="form-group">
              <label for="local">Local</label>
              <input type="text" id="local" required />
            </div>
            <div class="form-group">
              <label for="numero_vagas">Vagas</label>
              <input type="number" id="numero_vagas" min="0" required />
            </div>
          </div>
          <div class="form-actions">
            <button type="button" id="cancelBtn" class="btn btn-outline">
              Cancelar
            </button>
            <button type="submit" class="btn btn-primary">Salvar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- ... (Mantenha todo o cÃ³digo anterior atÃ© antes dos scripts) ... -->

    <!-- MODAL DE FEEDBACK (ADICIONE ISTO APÃ“S O MODAL DE CRIAR EVENTO) -->
    <div id="feedbackModal" class="modal">
      <div class="modal-overlay"></div>
      <div class="modal-content" style="max-width: 700px">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
          "
        >
          <h2 id="feedbackModalTitle" style="margin: 0">
            AvaliaÃ§Ãµes do Evento
          </h2>
          <button
            id="closeFeedbackBtn"
            class="btn btn-outline"
            style="padding: 5px 10px"
          >
            X
          </button>
        </div>

        <!-- Resumo das Notas -->
        <div
          id="feedbackSummary"
          style="
            background: var(--muted);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-around;
            text-align: center;
          "
        >
          <!-- Preenchido via JS -->
        </div>

        <!-- Lista de ComentÃ¡rios -->
        <div id="feedbackList" style="max-height: 400px; overflow-y: auto">
          <p class="text-center">Carregando...</p>
        </div>
      </div>
    </div>
    <!-- MODAL DE LISTA DE PARTICIPANTES -->
    <div id="participantsModal" class="modal">
      <div class="modal-overlay"></div>
      <div class="modal-content" style="max-width: 500px">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 10px;
          "
        >
          <h2 id="participantsModalTitle" style="margin: 0; font-size: 1.5rem">
            Lista de Inscritas
          </h2>
          <button
            id="closeParticipantsBtn"
            class="btn btn-outline"
            style="padding: 5px 10px"
          >
            X
          </button>
        </div>

        <div
          style="
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          "
        >
          <span
            id="participantsCountBadge"
            class="badge"
            style="background: var(--primary-color-start)"
            >0 Inscritas</span
          >
          <button
            id="copyEmailsBtn"
            class="btn btn-outline"
            style="font-size: 0.8rem; padding: 5px 10px"
          >
            ðŸ“‹ Copiar E-mails
          </button>
        </div>

        <!-- Lista de Nomes -->
        <div
          id="participantsList"
          style="
            max-height: 400px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
          "
        >
          <p class="text-center">Carregando...</p>
        </div>
      </div>
    </div>

    <script src="./scripts/admin-auth.js" defer></script>
    <script src="./scripts/admin-eventos.js" defer></script>
  </body>
</html>
